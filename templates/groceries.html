{% extends 'base.html' %}
{% block title %}Groceries{% endblock %}

{% block content %}
  <h1>Groceries</h1>
  <table class="table table-striped table-hover">
    <thead>
      <tr><th scope="col">Name</th><th scope="col">No.</th><th scope="col">Note</th><th scope="col">Votes</th><th scope="col">Vote</th><th scope="col">Del</th></tr>
    </thead>
    <tbody>
      {% for item in groceries %}
        {% if show_bought or not item.recently_bought %}
          <tr>
            <td>{{ item.name }}{% if item.recently_bought %} <em>(Deleted by {{ capitalize(item.bought_by) }} on {{ time_conv(item.bought_when).strftime('%b %d') }})</em>{% endif %}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.note }}</td>
            <td>{{ votes_to_string(item.votes) }}</td>
            <td><a href="/groceries/vote/{{ item.id }}">Toggle</a></td>
            <td><a href="/groceries/{% if item.recently_bought %}undelete{% else %}delete{% endif %}/{{ item.id }}">{% if item.recently_bought %}Recover{% else %}x{% endif %}</a></td>
          </tr>
        {% endif %}
      {% endfor %}
      <form action="/groceries/add" method="post">
        <tr>
          <td><input type="text" name="name" placeholder="Name" style="width: 100%;" /></td>
          <td><input type="number" name="quantity" value="1" size="3" style="max-width: 30px" /></td>
          <td><input type="text" name="note" placeholder="Note"  style="width: 100%;" /></td>
          <td>-</td>
          <td>-</td>
          <td><input type="submit" name="submit" value="Add" /></td>
        </tr>
      </form>
    </tbody>
  </table>
  {% if not show_bought %}
    <a class="btn" href="/groceries?show_bought">Recover bought</a>
  {% else %}
    <a class="btn" href="/groceries">Hide bought</a>
  {% endif %}
{% endblock %}

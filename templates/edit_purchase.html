{% extends 'base.html' %}
{% block title %}Edit purchase{% endblock %}

{% block extrastyle %}
<style type="text/css">
  td {
    padding: 10px;
  }
</style>
{% endblock %}

{% block content %}
  <h1>Edit purchase {{ id }}</h1>
  <form id="form" action="/purchase/edit/{{ id }}" method="post">
    <table>
      <tr>
        <td>
          <label for="name">Name</label>
        </td>
        <td>
          <input name="name" required id="name" type="text" value="{{ data.name }}" />
        </td>
      </tr>
      <tr>
        <td>
          <label for="bought_when">Bought when?</label>
        </td>
        <td>
          <input name="bought_when" required type="date" id="bought_when" value="{{ data.bought_when }}" />
        </td>
      </tr>
      <tr>
        <td>
          <label for="bought_by">Bought by?</label>
        </td>
        <td>
          <select name="bought_by" id="bought_by">
            {% for roommate in roommates %}
              <option value="{{ roommate.lower() }}" {% if roommate.lower() == data.bought_by.lower() %}selected{% endif %}>{{ roommate }}</option>
            {% endfor %}
          </select>
        </td>
      </tr>
      <tr>
        <td valign="top">
          <label>Bought for?</label>
        </td>
        <td>
          {% for roommate in roommates %}
            <input id="buying_for_{{ roommate.lower() }}" name="buying_for_{{ roommate.lower() }}" type="checkbox" {% if roommate.lower() in data.bought_for %}checked{% endif %}/> <label for="buying_for_{{ roommate.lower() }}">{{ roommate }}</label><br />
          {% endfor %}
        </td>
      </tr>
      <tr>
        <td>
          <label for="spending_type">Spending type</label>
        </td>
        <td>
          <select id="spending_type" name="spending_type">
            {% for spending_type in spending_types %}
              <option value="{{ spending_type }}" {% if spending_type.lower() == data.spending_type.lower() %}selected{% endif %}>{{ capitalize(spending_type) }}</option>
            {% endfor %}
          </select>
        </td>
      </tr>
      <tr>
        <td>
          <label for="price">Price</label>
        </td>
        <td>
          $<input id="price" name="price" type="number" min="0" max="5000" step="0.01" value="{{ data.price }}" required style="max-width: 70px;" />
        </td>
      </tr>
      <tr>
        <td>
          <label for="split_mode">Split type</label>
        </td>
        <td>
          <select id="split_mode" name="split_mode">
            <option value="even">Even</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>
          <label>Receipt</label>
        </td>
        <td>
          <a class="btn btn-secondary" href="#" onclick="alert('Functionality not yet added.')">+ Add</a>
        </td>
      </tr>
      <tr>
        <td valign="top">
          <label for="additional_info">Additional info</label>
        </td>
        <td>
          <textarea form="form" name="additional_info" id="additional_info">{{ data.additional_info }}</textarea>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <input type="submit" name="delete" value="Delete" class="btn btn-danger" {% if not can_delete %}disabled title="You can only delete your own purchases."{% endif %} />
          <input type="submit" name="save" value="Save" class="btn btn-primary" />
        </td>
      </tr>
    </table>
  </form>
{% endblock %}
